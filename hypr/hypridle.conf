# ~/.config/hypr/hypridle.conf

general {
    lock_cmd = hyprlock
    before_sleep_cmd = hyprlock # Lock screen before suspending
}

# Listener 1: Runs after 5 minutes (300 seconds)
# It executes our script, which ONLY locks the screen if on battery power.
listener {
    timeout = 300
    on-timeout = $HOME/.config/hypr/scripts/lock-if-on-battery.sh
}

# Listener 2: Runs after 1 hour (3600 seconds)
# This is the fallback for when you are on AC power.
# It will only be reached if the first listener's script did nothing.
listener {
    timeout = 3600
    on-timeout = hyprlock
}
